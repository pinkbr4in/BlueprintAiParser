/* Dark Theme for Blueprint Parser */

:root {
    /* Dark theme colors */
    --bg-dark: #1a1a1a;
    --bg-darker: #141414;
    --bg-code: #1e1e2e;
    --bg-card: #242430;
    --text-primary: #e4e4e4;
    --text-secondary: #b8b8b8;
    --text-muted: #888888;
    --border-color: #333340;
    
    /* Blueprint syntax colors */
    --bp-var: #79d0ff;            /* Variables (blue) */
    --bp-node-type: #c792ea;      /* Node types (purple) */
    --bp-flow: #f78c6c;           /* Flow control (orange) */
    --bp-arrow: #ff9cac;          /* Arrows (pink) */
    --bp-section: #c3e88d;        /* Section headers (green) */
    --bp-branch-true: #26a566;    /* True branches (green) */
    --bp-branch-false: #ef5350;   /* False branches (red) */
  }
  
  /* Base styles */
  body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    background-color: var(--bg-darker);
    color: var(--text-primary);
    line-height: 1.6;
    margin: 0;
    padding: 0;
  }
  
  .container {
    max-width: 1200px;
    margin: 20px auto;
    background-color: var(--bg-dark);
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  }
  
  h1, h2, h3, h4, h5, h6 {
    color: var(--text-primary);
  }
  
  h1 {
    border-bottom: 1px solid var(--border-color);
    padding-bottom: 10px;
  }
  
  a {
    color: #4d78cc;
    text-decoration: none;
  }
  
  a:hover {
    text-decoration: underline;
  }
  
  p {
    color: var(--text-secondary);
  }
  
  /* Form elements */
  textarea {
    width: 98%;
    height: 250px;
    background-color: var(--bg-code);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 12px;
    font-family: "Consolas", "Monaco", monospace;
    font-size: 14px;
  }
  
  textarea:focus {
    outline: none;
    border-color: #4d78cc;
    box-shadow: 0 0 0 2px rgba(77, 120, 204, 0.25);
  }
  
  button {
    background-color: #26a566;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
  }
  
  button:hover {
    background-color: #1e8a55;
  }
  
  /* Tab styling */
  .nav-tabs {
    border-bottom: 1px solid var(--border-color);
  }
  
  .nav-tabs .nav-link {
    color: var(--text-secondary);
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-color);
    border-bottom: none;
    border-radius: 4px 4px 0 0;
  }
  
  .nav-tabs .nav-link.active {
    color: var(--text-primary);
    background-color: var(--bg-dark);
    border-bottom-color: var(--bg-dark);
  }
  
  /* Card styling */
  .card {
    background-color: var(--bg-dark);
    border: 1px solid var(--border-color);
  }
  
  .card-header {
    background-color: rgba(0, 0, 0, 0.2);
    border-bottom: 1px solid var(--border-color);
  }
  
  /* Blueprint blocks */
  pre.blueprint {
    background-color: var(--bg-code);
    color: var(--text-primary);
    padding: 15px;
    border-radius: 4px;
    overflow-x: auto;
    font-family: "Consolas", "Monaco", monospace;
    font-size: 14px;
    border-left: 3px solid #4d78cc;
    line-height: 1.6;
  }
  
  /* Event header styling */
  .custom-event-header {
    color: var(--bp-section);
    font-weight: bold;
    margin-bottom: 8px;
    font-size: 1.1em;
  }
  
  .event-name {
    color: #ffcb6b;  /* Yellow color for event names */
    font-weight: bold;
  }
  
  .event-args {
    color: #89ddff;  /* Cyan color for arguments */
  }
  
  /* Blueprint syntax coloring */
  .bp-node-type {
    color: var(--bp-node-type);
    font-weight: bold;
  }
  
  .bp-var {
    color: var(--bp-var);
  }
  
  .bp-arrow {
    color: var(--bp-arrow);
    font-weight: bold;
  }
  
  .bp-flow {
    color: var(--bp-flow);
  }
  
  .bp-section {
    color: var(--bp-section);
    font-weight: bold;
  }
  
  .bp-branch-True {
    color: var(--bp-branch-true);
    font-weight: bold;
  }
  
  .bp-branch-False {
    color: var(--bp-branch-false);
    font-weight: bold;
  }
  
  /* Allow spans to display inline in code */
  pre.blueprint span {
    display: inline !important;
  }
  
  /* Tables */
  .markdown-body table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    table-layout: fixed; /* Added: Helps control column widths */
  }
  
  .markdown-body table th,
  .markdown-body table td {
    border: 1px solid var(--border-color);
    padding: 8px 12px;
    text-align: left;
    vertical-align: top; /* Keep content aligned to the top */
    /* Ensure wrapping */
    white-space: normal; /* Override potential nowrap */
    word-wrap: break-word; /* Legacy fallback */
    overflow-wrap: break-word; /* Standard-compliant */
    word-break: break-word; /* Force breaks if needed */
  }
  
  .markdown-body table th {
    background-color: rgba(0, 0, 0, 0.2);
    font-weight: bold;
  }
  
  .markdown-body table tr:nth-child(even) {
    background-color: rgba(255, 255, 255, 0.03);
  }
  
  /* Fix span rendering in tables */
  .blueprint-table span { /* Use the class added by process_blueprint_tables */
    display: inline !important; /* Keep inline display for spans */
  }
  
  /* Ensure code tags within tables also wrap */
  .markdown-body table td code {
    white-space: normal; /* Allow wrapping inside code tags */
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word; /* Force breaks */
    display: inline; /* Make sure code doesn't force block display */
    padding: 2px 0; /* Adjust padding if needed */
    background-color: transparent; /* Inherit background or set explicitly */
    color: inherit; /* Inherit color */
  }
  
  .blueprint-table td span {
    display: inline !important;
  }
  
  /* Variable highlighting in tables */
  .blueprint-table td:first-child {
    color: var(--bp-var);
    font-weight: bold;
    /* Optional: Assign width to first column */
    width: 20%; /* Example width */
  }
  
  /* Type highlighting in tables */
  .blueprint-table td:nth-child(2) {
    color: #89ddff;  /* Cyan for types */
    /* Optional: Assign width to second column */
    width: 15%; /* Example width */
  }
  
  /* Function names in table */
  .blueprint-table td:first-child:not(.var) {
    color: var(--bp-node-type);
    font-weight: bold;
  }
  
  /* Optional: Assign width to the problematic columns */
  /* Applies to both 'Value Set' and 'Parameters Called With' */
  .markdown-body table td:nth-child(3) {
      width: 50%; /* Example: Give it more space */
  }
  /* Assign width to 'Latent' column if needed */
  .markdown-body table td:nth-child(4) {
       width: 15%; /* Example */
  }
  
  /* JSON styling */
  pre code.language-json {
    background-color: var(--bg-code);
    color: var(--text-primary);
  }
  
  /* Stats summary */
  .stats-summary {
    background-color: rgba(0, 0, 0, 0.2);
    border: 1px solid var(--border-color);
    border-radius: 4px;
    padding: 15px;
    margin-bottom: 20px;
  }
  
  /* Alerts */
  .alert-danger {
    background-color: #481a1d;
    color: #f8d7da;
    border-color: #641e23;
  }
  
  /* Bootstrap overrides */
  .text-muted {
    color: var(--text-muted) !important;
  }
  
  .btn-success {
    background-color: #26a566;
    border-color: #1e8a55;
  }
  
  .btn-success:hover {
    background-color: #1e8a55;
    border-color: #1a7a4a;
  }
  
  .btn-secondary {
    background-color: #4d78cc;
    border-color: #3a68c1;
  }
  
  .btn-secondary:hover {
    background-color: #3a68c1;
    border-color: #3460b7;
  }
  
  /* Markdown body formatting */
  .markdown-body {
    color: var(--text-primary);
  }
  
  .markdown-body pre {
    background-color: var(--bg-code);
    color: var(--text-primary);
    padding: 15px;
    border-radius: 4px;
    overflow-x: auto;
  }
  
  .markdown-body code {
    background-color: rgba(255, 255, 255, 0.1);
    color: #f8f8f2;
    padding: 2px 4px;
    border-radius: 3px;
  }
  
  .markdown-body hr {
    border: 0;
    border-top: 1px solid var(--border-color);
    margin: 20px 0;
  }
  
  .markdown-body blockquote {
    border-left: 4px solid #4d78cc;
    background-color: rgba(77, 120, 204, 0.1);
    padding: 10px 15px;
    margin: 0 0 20px;
  }
  
  /* Styles for existing span elements in tables and code */
  .bp-keyword, .bp-event-name, .bp-data-type, .bp-var,
  .bp-func-name, .bp-param-name, .bp-delegate-name,
  .bp-literal-number, .bp-literal-bool, .bp-struct-kw,
  .bp-struct-val, .bp-operator, .bp-section, 
  .bp-literal-string, .bp-literal-object, .bp-pin-name {
    display: inline !important;
  }
  
  .bp-keyword {
    color: var(--bp-node-type);
    font-weight: bold;
  }
  
  .bp-event-name {
    color: #ffcb6b;
    font-weight: bold;
  }
  
  .bp-data-type {
    color: #89ddff;
  }
  
  .bp-func-name {
    color: var(--bp-node-type);
    font-weight: bold;
  }
  
  .bp-param-name {
    color: #ff9cac;
    font-style: italic;
  }
  
  .bp-delegate-name {
    color: #89ddff;
  }
  
  .bp-literal-number {
    color: #f78c6c;
  }
  
  .bp-literal-bool {
    color: #ff9cac;
  }
  
  .bp-literal-string {
    color: #c3e88d;
  }
  
  .bp-literal-object {
    color: #ffcb6b;
  }
  
  .bp-operator {
    color: #89ddff;
  }
  
  .bp-pin-name {
    color: #c3e88d;
  }
  
  .bp-struct-kw, .bp-struct-val {
    color: #80cbc4;
  }
  
  /* Mobile responsiveness */
  @media (max-width: 768px) {
    .container {
      padding: 15px;
      margin: 10px;
    }
    
    pre.blueprint {
      font-size: 12px;
    }
    
    /* Ensure tables still scroll on mobile if needed, but allow wrapping first */
    .markdown-body table {
       display: block; /* Needed for overflow-x on mobile */
       overflow-x: auto; /* Allow horizontal scroll *only if needed* */
       /* Reset fixed layout for mobile to allow columns to adjust */
       table-layout: auto;
    }
     /* Ensure td allows wrapping on mobile */
     .markdown-body table td {
        white-space: normal !important;
     }
      /* Remove fixed widths on mobile */
     .markdown-body table td:nth-child(1),
     .markdown-body table td:nth-child(2),
     .markdown-body table td:nth-child(3),
     .markdown-body table td:nth-child(4) {
         width: auto;
     }
  }

/* Fix for event names in Custom Event headers */
pre.blueprint .bp-event-name,
h3 .bp-event-name,
.custom-event-header .bp-event-name {
  color: #ffcb6b !important;  /* Force yellow color for event names */
  font-weight: bold;
  display: inline !important;
}

/* Make sure code spans display correctly */
pre.blueprint code span {
  display: inline !important;
}

/* Fix for function names in code blocks */
pre.blueprint .bp-func-name {
  color: #c792ea !important; /* Purple for functions */
  font-weight: bold;
  display: inline !important;
}

/* Fix for all BP class spans to be displayed inline in code blocks */
pre.blueprint span[class^="bp-"] {
  display: inline !important;
}

/* Ensure consistent coloring for all Blueprint elements */
.bp-event-name, .bp-func-name, .bp-param-name, .bp-var,
.bp-delegate-name, .bp-class-name, .bp-component-name,
.bp-widget-name, .bp-timeline-name, .bp-montage-name,
.bp-action-name, .bp-macro-name {
  display: inline !important;
}

/* Core blueprint elements */
.bp-event-name {
  color: #ffcb6b;  /* Distinctive yellow for events */
  font-weight: bold;
}

.bp-func-name {
  color: #c792ea;  /* Purple for functions */
  font-weight: bold;
}

.bp-var {
  color: #79d0ff;  /* Bright blue for variables */
}

.bp-delegate-name {
  color: #89ddff;  /* Cyan for delegates */
  font-weight: bold;
}

/* Add missing essential class definitions */
.bp-macro-name {
  color: #f78c6c;  /* Orange for macros */
  font-weight: bold;
}

.bp-class-name, .bp-component-name, .bp-widget-name {
  color: #c3e88d;  /* Green for classes/components/widgets */
  font-weight: bold;
}

.bp-timeline-name, .bp-montage-name, .bp-action-name {
  color: #f07178;  /* Coral for special actions */
  font-weight: bold;
}

/* Ensure proper nesting in formatted output */
.markdown-body pre.blueprint span[class^="bp-"] {
  display: inline !important;
}

/* Fix for tables */
.blueprint-table td span[class^="bp-"] {
  display: inline !important;
}